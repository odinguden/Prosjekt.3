<!DOCTYPE html>

<html lang="no">
    
<head>
    <meta charset="utf-8">
    <title>Bestill</title>
    <link rel="stylesheet" href="stil.film.css">
    <link rel="shortcut icon" href="../media/VossLogo.png">
    <style>
    </style>

</head>
    
    
    <body>
        <header>
            <nav>
                <a href="oss.html">Om Oss</a>
                <a href="vossfilm.html">Heim</a>
                <a href="bestill.html">Bestill</a>
            </nav>
        </header>
        <article id="txtBruker"></article>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-database.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->


        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyCX5fHGK6c13RSvSjJ7eNHdYrAFutjsbYg",
                authDomain: "prosjekt-3-87f15.firebaseapp.com",
                databaseURL: "https://prosjekt-3-87f15-default-rtdb.firebaseio.com",
                projectId: "prosjekt-3-87f15",
                storageBucket: "prosjekt-3-87f15.appspot.com",
                messagingSenderId: "993669415130",
                appId: "1:993669415130:web:3f945466f741611bf9a5e3",
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
        </script>

        <script>

            let database = firebase.database();
            let Bruker = database.ref("Bruker");
            let skjema1 = document.getElementById("skjema1");
            let inpFornamn = document.getElementById("inpFornamn");
            let inpEtternamn = document.getElementById("inpEtternamn");
            let inpMail = document.getElementById("inpMail");
            let inpTlf = document.getElementById("inpTlf");
            let inpBedrift = document.getElementById("inpBedrift")
            let inpPost = document.getElementById("inpPost");
            let inpGate = document.getElementById("inpGate");
            let txtBruker = document.getElementById("txtBruker");

            function visBruker(snapshot) {
                let bruker = snapshot.val();
                let brukertekst = `<p>
                        <b>Namn: </b>${bruker.fornamn} ${bruker.etternamn}
                        <b>Bedrift: </b>${bruker.bedrift} <br>
                        <b>Telefon: </b>${bruker.telefon}
                        <b>e-post: </b>${bruker.epost} <br>
                        <b>Adresse: </b>${bruker.gate} <b>Poststed: </b>${bruker.post}
                        </p>`;
                txtBruker.innerHTML = txtBruker.innerHTML + brukertekst;
            }

            function regNybruker(evt) {
                evt.preventDefault();
                let nyBruker = {
                    fornamn: inpFornamn.value,
                    etternamn: inpEtternamn.value,
                    telefon: inpTlf.value,
                    epost: inpMail.value,
                    bedrift: inpBedrift.value,
                    post: inpPost.value,
                    gate: inpGate.value,
                };
                Bruker.push(nyBruker);
                inpFornamn.value = "";
                inpEtternamn.value = "";
                inpBedrift.value = "";
                inpTlf.value = "";
                inpMail.value = "";
                inpGate.value = "";
                inpPost.value = "";
            }

            Bruker.on("child_added", visBruker);
            skjema1.onsubmit = regNybruker;

        </script>


    </body>

</html>